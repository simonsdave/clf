# Story

## The Opportunity

Screen scraping has been a key enabler of many thriving businesses.
When coupled with the seemingly unbounded desire for data,
the trend of using to spiders to acquire data to enable new
and existing businesses shows no sign of slowing down.

APIs are everywhere and increasingly businesses with a web presence
are expected
to have APIs and web sites which offer the same functionality.
While most businesses offer a visual interface for human consumption
of their offerings,
very few businesses, by comparison, offer RESTful APIs for
automated consumption of their offerings.
What if we had a RESTful API that invoked a
spider to crawl and interact with a web site?
Wouldn't that be an easy way to create a RESTful API for
a web site?

## The Problem

There are
[lots of screen scraping utilities](other_screen_screen_scapers.md).
How is Cloudfeaster so different?
Traditional spiders are written to mimic the network traffic
generated by a web browser when surfing a web site.
Historical it’s been hard to write spiders that use this approach
and it’s getting much harder as web sites increasingly leverage
AJAX patterns.
In addition, this approach to spider writing makes spiders very brittle
with even minor web site changes causing spiders to break
in ways that are often hard to debug.

## Trends

Adoption of automated testing has fueled a few very important trends:
1. web sites are now being built to simplify automated testing
and enable automated tests to be robust even in the face of web
site changes ie. web sites
are being built "correctly" with HTML for content,
CSS for look and feel and JavaScript for functionality
1. automated testing tools have become very robust ([Chrome supporting headless mode](https://developers.google.com/web/updates/2017/04/headless-chrome),
[Chrome's robust DevTools Protocol](https://chromedevtools.github.io/devtools-protocol/),
[ChromeDriver useses DevTools Protocol to implement WebDriver protocol](https://sites.google.com/a/chromium.org/chromedriver/),
[standardization of WebDriver protocol](https://w3c.github.io/webdriver/webdriver-spec.html),
[Python binding of the WebDriver protocol](https://seleniumhq.github.io/selenium/docs/api/py/index.html))

There are also important IaaS trends:

1. the number of IaaS providers is increasing
1. IaaS costs continue to drop
1. an increasing number of very capable CI services
are being built on IaaS offerings
1. efficiently running and isolating a variety of workload types
on an IaaS offering at scale has become easy with [Docker](https://www.docker.com/)
and [Kubernetes](https://kubernetes.io/)

## The Cloudfeaster Approach

Write spiders using a high level scripting language (Python)
using tools/APIs designed for automated testing ([Selenium](http://www.seleniumhq.org/)).
Package collections of spiders in a [Docker](https://www.docker.com/) image.
This means:

  * spiders are easy to write
  * spiders are reliable even in the face of most web site changes
  * it's possible to outsource spider development and maintenance

Use a RESTful API for discovering and running spiders.
Host the service behind the RESTful API on an IaaS provider.
To run a spider, the service locates the [Docker](https://www.docker.com/) image
containing the spider, makes sure the latest version of the [Docker](https://www.docker.com/) image
is available and uses the latest [Docker](https://www.docker.com/) image to
create a [Docker](https://www.docker.com/) container in which the spider is run.
Inside the [Docker](https://www.docker.com/) container a headless browser
is started and the spider runs against that headless browser.
Use [Kubernetes](https://kubernetes.io/) for all orchestration and operation
of [Docker](https://www.docker.com/) containers to both run the service
behind the RESTful API and run the spiders .
